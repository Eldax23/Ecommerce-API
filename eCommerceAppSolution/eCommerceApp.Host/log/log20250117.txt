2025-01-17 02:12:56.920 +02:00 [INF] Application Is Building.....
2025-01-17 02:12:57.980 +02:00 [INF] User profile is available. Using 'C:\Users\moham\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 02:12:58.168 +02:00 [INF] Application Is Running.....
2025-01-17 02:12:58.242 +02:00 [INF] Now listening on: http://localhost:5071
2025-01-17 02:12:58.244 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 02:12:58.244 +02:00 [INF] Hosting environment: Development
2025-01-17 02:12:58.245 +02:00 [INF] Content root path: D:\Ecommerce-API\eCommerceAppSolution\eCommerceApp.Host
2025-01-17 02:12:58.649 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/index.html - null null
2025-01-17 02:12:59.555 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/index.html - 200 null text/html;charset=utf-8 907.6592ms
2025-01-17 02:12:59.628 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - null null
2025-01-17 02:12:59.714 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 86.6643ms
2025-01-17 02:13:05.921 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/api/Category - null null
2025-01-17 02:13:06.105 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 02:13:06.109 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.CategoryController.Getall (eCommerceApp.Host)'
2025-01-17 02:13:06.122 +02:00 [INF] Route matched with {action = "Getall", controller = "Category", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Getall() on controller eCommerceApp.Host.Controllers.CategoryController (eCommerceApp.Host).
2025-01-17 02:13:06.523 +02:00 [INF] Executing action method eCommerceApp.Host.Controllers.CategoryController.Getall (eCommerceApp.Host) - Validation state: "Valid"
2025-01-17 02:13:07.083 +02:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-17 02:13:07.872 +02:00 [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Categories] AS [c]
2025-01-17 02:13:07.928 +02:00 [INF] Executed action method eCommerceApp.Host.Controllers.CategoryController.Getall (eCommerceApp.Host), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1401.0649ms.
2025-01-17 02:13:07.936 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[eCommerceApp.Application.DTOs.Category.GetCategory, eCommerceApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-17 02:13:07.964 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.CategoryController.Getall (eCommerceApp.Host) in 1838.0218ms
2025-01-17 02:13:07.965 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.CategoryController.Getall (eCommerceApp.Host)'
2025-01-17 02:13:07.976 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/api/Category - 200 null application/json; charset=utf-8 2054.9547ms
2025-01-17 02:13:18.563 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/api/Product - null null
2025-01-17 02:13:18.566 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host)'
2025-01-17 02:13:18.570 +02:00 [INF] Route matched with {action = "Getall", controller = "Product", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Getall() on controller eCommerceApp.Host.Controllers.ProductController (eCommerceApp.Host).
2025-01-17 02:13:18.572 +02:00 [INF] Executing action method eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host) - Validation state: "Valid"
2025-01-17 02:13:18.645 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CategoryId], [p].[Description], [p].[Image], [p].[Name], [p].[decimal(18,2)], [p].[Quantity]
FROM [Products] AS [p]
2025-01-17 02:13:18.653 +02:00 [INF] Executed action method eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 79.763ms.
2025-01-17 02:13:18.654 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[eCommerceApp.Application.DTOs.Product.GetProduct, eCommerceApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-17 02:13:18.661 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host) in 90.2876ms
2025-01-17 02:13:18.661 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host)'
2025-01-17 02:13:18.663 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/api/Product - 200 null application/json; charset=utf-8 99.5504ms
2025-01-17 02:13:49.329 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5071/api/Product - application/json 157
2025-01-17 02:13:49.344 +02:00 [INF] CORS policy execution successful.
2025-01-17 02:13:49.346 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.ProductController.Add (eCommerceApp.Host)'
2025-01-17 02:13:49.356 +02:00 [INF] Route matched with {action = "Add", controller = "Product", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Add(eCommerceApp.Application.DTOs.Product.CreateProduct) on controller eCommerceApp.Host.Controllers.ProductController (eCommerceApp.Host).
2025-01-17 02:13:49.390 +02:00 [INF] Executing action method eCommerceApp.Host.Controllers.ProductController.Add (eCommerceApp.Host) - Validation state: "Valid"
2025-01-17 02:13:49.641 +02:00 [ERR] Failed executing DbCommand (74ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (Precision = 18) (Scale = 2) (DbType = Decimal), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Products] ([Id], [CategoryId], [Description], [Image], [Name], [decimal(18,2)], [Quantity])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6);
2025-01-17 02:13:49.663 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'eCommerceApp.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Categories_CategoryId". The conflict occurred in database "eCommerceAPI", table "dbo.Categories", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:627fb14a-bf78-44f1-aaa5-0276218c2b66
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Categories_CategoryId". The conflict occurred in database "eCommerceAPI", table "dbo.Categories", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:627fb14a-bf78-44f1-aaa5-0276218c2b66
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-01-17 02:13:49.679 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.ProductController.Add (eCommerceApp.Host) in 322.3055ms
2025-01-17 02:13:49.680 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.ProductController.Add (eCommerceApp.Host)'
2025-01-17 02:13:49.682 +02:00 [ERR] Sql Exception
Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Products_Categories_CategoryId". The conflict occurred in database "eCommerceAPI", table "dbo.Categories", column 'Id'.
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:627fb14a-bf78-44f1-aaa5-0276218c2b66
Error Number:547,State:0,Class:16
2025-01-17 02:13:49.685 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5071/api/Product - 409 null application/json 355.4418ms
2025-01-17 02:14:02.261 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/api/Product - null null
2025-01-17 02:14:02.263 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host)'
2025-01-17 02:14:02.264 +02:00 [INF] Route matched with {action = "Getall", controller = "Product", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Getall() on controller eCommerceApp.Host.Controllers.ProductController (eCommerceApp.Host).
2025-01-17 02:14:02.268 +02:00 [INF] Executing action method eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host) - Validation state: "Valid"
2025-01-17 02:14:02.274 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[CategoryId], [p].[Description], [p].[Image], [p].[Name], [p].[decimal(18,2)], [p].[Quantity]
FROM [Products] AS [p]
2025-01-17 02:14:02.276 +02:00 [INF] Executed action method eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 7.1388ms.
2025-01-17 02:14:02.277 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[eCommerceApp.Application.DTOs.Product.GetProduct, eCommerceApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-17 02:14:02.278 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host) in 13.0302ms
2025-01-17 02:14:02.279 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.ProductController.Getall (eCommerceApp.Host)'
2025-01-17 02:14:02.280 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/api/Product - 200 null application/json; charset=utf-8 18.9202ms
2025-01-17 02:24:02.767 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5071/api/Authentication/login - application/json 66
2025-01-17 02:24:02.769 +02:00 [INF] CORS policy execution successful.
2025-01-17 02:24:02.770 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host)'
2025-01-17 02:24:02.774 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(eCommerceApp.Application.DTOs.Identity.LoginUser) on controller eCommerceApp.Host.Controllers.AuthenticationController (eCommerceApp.Host).
2025-01-17 02:24:02.818 +02:00 [INF] Executing action method eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host) - Validation state: "Valid"
2025-01-17 02:24:02.906 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:24:02.946 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:24:02.989 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-17 02:24:03.144 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:24:03.146 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:24:03.149 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-17 02:24:03.229 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [Token], [UserId])
VALUES (@p0, @p1, @p2);
2025-01-17 02:24:03.238 +02:00 [INF] Executed action method eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 419.425ms.
2025-01-17 02:24:03.239 +02:00 [INF] Executing OkObjectResult, writing value of type 'eCommerceApp.Application.DTOs.LoginResponse'.
2025-01-17 02:24:03.245 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host) in 469.976ms
2025-01-17 02:24:03.246 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host)'
2025-01-17 02:24:03.247 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5071/api/Authentication/login - 200 null application/json; charset=utf-8 480.0088ms
2025-01-17 02:24:37.304 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5071/api/Authentication/ChangePassword - application/json 62
2025-01-17 02:24:37.306 +02:00 [INF] CORS policy execution successful.
2025-01-17 02:24:37.307 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host)'
2025-01-17 02:24:37.310 +02:00 [INF] Route matched with {action = "ChangePassword", controller = "Authentication", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePassword(eCommerceApp.Application.DTOs.Identity.ForgetPassword) on controller eCommerceApp.Host.Controllers.AuthenticationController (eCommerceApp.Host).
2025-01-17 02:24:37.322 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-17 02:24:37.340 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host) in 27.5129ms
2025-01-17 02:24:37.340 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host)'
2025-01-17 02:24:37.342 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5071/api/Authentication/ChangePassword - 400 null application/problem+json; charset=utf-8 38.3466ms
2025-01-17 02:24:48.308 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5071/api/Authentication/ChangePassword - application/json 65
2025-01-17 02:24:48.310 +02:00 [INF] CORS policy execution successful.
2025-01-17 02:24:48.311 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host)'
2025-01-17 02:24:48.311 +02:00 [INF] Route matched with {action = "ChangePassword", controller = "Authentication", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePassword(eCommerceApp.Application.DTOs.Identity.ForgetPassword) on controller eCommerceApp.Host.Controllers.AuthenticationController (eCommerceApp.Host).
2025-01-17 02:24:48.325 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-01-17 02:24:48.326 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host) in 13.976ms
2025-01-17 02:24:48.326 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host)'
2025-01-17 02:24:48.327 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5071/api/Authentication/ChangePassword - 400 null application/problem+json; charset=utf-8 18.5983ms
2025-01-17 02:25:22.229 +02:00 [INF] Request starting HTTP/1.1 PUT http://localhost:5071/api/Authentication/ChangePassword - application/json 74
2025-01-17 02:25:22.230 +02:00 [INF] CORS policy execution successful.
2025-01-17 02:25:22.231 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host)'
2025-01-17 02:25:22.232 +02:00 [INF] Route matched with {action = "ChangePassword", controller = "Authentication", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePassword(eCommerceApp.Application.DTOs.Identity.ForgetPassword) on controller eCommerceApp.Host.Controllers.AuthenticationController (eCommerceApp.Host).
2025-01-17 02:25:22.235 +02:00 [INF] Executing action method eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host) - Validation state: "Valid"
2025-01-17 02:25:22.248 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:25:22.322 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (Size = 450), @p2='?' (Size = 4000), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [AspNetUsers] SET [PasswordHash] = @p0
OUTPUT 1
WHERE [Id] = @p1 AND [ConcurrencyStamp] = @p2;
2025-01-17 02:25:22.328 +02:00 [INF] Executed action method eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 91.3799ms.
2025-01-17 02:25:22.328 +02:00 [INF] Executing OkObjectResult, writing value of type 'eCommerceApp.Application.DTOs.ServiceResponse'.
2025-01-17 02:25:22.331 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host) in 96.9942ms
2025-01-17 02:25:22.331 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.ChangePassword (eCommerceApp.Host)'
2025-01-17 02:25:22.333 +02:00 [INF] Request finished HTTP/1.1 PUT http://localhost:5071/api/Authentication/ChangePassword - 200 null application/json; charset=utf-8 103.4371ms
2025-01-17 02:25:30.156 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5071/api/Authentication/login - application/json 66
2025-01-17 02:25:30.157 +02:00 [INF] CORS policy execution successful.
2025-01-17 02:25:30.157 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host)'
2025-01-17 02:25:30.158 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(eCommerceApp.Application.DTOs.Identity.LoginUser) on controller eCommerceApp.Host.Controllers.AuthenticationController (eCommerceApp.Host).
2025-01-17 02:25:30.161 +02:00 [INF] Executing action method eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host) - Validation state: "Valid"
2025-01-17 02:25:30.176 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:25:30.179 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:25:30.184 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-17 02:25:30.345 +02:00 [INF] Executed action method eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host), returned result Microsoft.AspNetCore.Mvc.BadRequestObjectResult in 183.1585ms.
2025-01-17 02:25:30.347 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2025-01-17 02:25:30.348 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host) in 189.0806ms
2025-01-17 02:25:30.349 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host)'
2025-01-17 02:25:30.349 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5071/api/Authentication/login - 400 null text/plain; charset=utf-8 193.6283ms
2025-01-17 02:25:37.956 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5071/api/Authentication/login - application/json 62
2025-01-17 02:25:37.957 +02:00 [INF] CORS policy execution successful.
2025-01-17 02:25:37.958 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host)'
2025-01-17 02:25:37.959 +02:00 [INF] Route matched with {action = "Login", controller = "Authentication", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(eCommerceApp.Application.DTOs.Identity.LoginUser) on controller eCommerceApp.Host.Controllers.AuthenticationController (eCommerceApp.Host).
2025-01-17 02:25:37.962 +02:00 [INF] Executing action method eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host) - Validation state: "Valid"
2025-01-17 02:25:37.964 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:25:37.967 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:25:37.970 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-17 02:25:38.111 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:25:38.114 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FullName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2025-01-17 02:25:38.116 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2025-01-17 02:25:38.132 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RefreshTokens] ([Id], [Token], [UserId])
VALUES (@p0, @p1, @p2);
2025-01-17 02:25:38.133 +02:00 [INF] Executed action method eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 170.7179ms.
2025-01-17 02:25:38.134 +02:00 [INF] Executing OkObjectResult, writing value of type 'eCommerceApp.Application.DTOs.LoginResponse'.
2025-01-17 02:25:38.134 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host) in 173.9512ms
2025-01-17 02:25:38.135 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.AuthenticationController.Login (eCommerceApp.Host)'
2025-01-17 02:25:38.135 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5071/api/Authentication/login - 200 null application/json; charset=utf-8 179.6433ms
2025-01-17 03:08:17.720 +02:00 [INF] Application is shutting down...
2025-01-17 03:14:57.410 +02:00 [INF] Application Is Building.....
2025-01-17 03:14:57.566 +02:00 [INF] User profile is available. Using 'C:\Users\moham\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 03:14:57.646 +02:00 [INF] Application Is Running.....
2025-01-17 03:14:57.701 +02:00 [INF] Now listening on: http://localhost:5071
2025-01-17 03:14:57.704 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 03:14:57.705 +02:00 [INF] Hosting environment: Development
2025-01-17 03:14:57.705 +02:00 [INF] Content root path: D:\Ecommerce-API\eCommerceAppSolution\eCommerceApp.Host
2025-01-17 03:14:58.218 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/index.html - null null
2025-01-17 03:14:58.342 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/index.html - 200 null text/html;charset=utf-8 125.4763ms
2025-01-17 03:14:58.430 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - null null
2025-01-17 03:14:58.502 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Swashbuckle.AspNetCore.SwaggerGen.SwaggerGeneratorException: Ambiguous HTTP method for action - eCommerceApp.Host.Controllers.PaymentController.GetAllPayments (eCommerceApp.Host). Actions require an explicit HttpMethod binding for Swagger/OpenAPI 3.0
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GenerateOperations(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GeneratePaths(IEnumerable`1 apiDescriptions, SchemaRepository schemaRepository)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerDocumentWithoutFilters(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.SwaggerGen.SwaggerGenerator.GetSwaggerAsync(String documentName, String host, String basePath)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-01-17 03:14:58.518 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - 500 null text/plain; charset=utf-8 87.4982ms
2025-01-17 03:15:09.552 +02:00 [INF] Application is shutting down...
2025-01-17 03:15:17.038 +02:00 [INF] Application Is Building.....
2025-01-17 03:15:17.195 +02:00 [INF] User profile is available. Using 'C:\Users\moham\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 03:15:17.258 +02:00 [INF] Application Is Running.....
2025-01-17 03:15:17.299 +02:00 [INF] Now listening on: http://localhost:5071
2025-01-17 03:15:17.301 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 03:15:17.302 +02:00 [INF] Hosting environment: Development
2025-01-17 03:15:17.303 +02:00 [INF] Content root path: D:\Ecommerce-API\eCommerceAppSolution\eCommerceApp.Host
2025-01-17 03:15:17.835 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/index.html - null null
2025-01-17 03:15:17.942 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/index.html - 200 null text/html;charset=utf-8 107.4312ms
2025-01-17 03:15:18.014 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - null null
2025-01-17 03:15:18.113 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.8117ms
2025-01-17 03:15:21.628 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/api/Payment - null null
2025-01-17 03:15:21.637 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 03:15:21.640 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.PaymentController.GetAllPayments (eCommerceApp.Host)'
2025-01-17 03:15:21.653 +02:00 [INF] Route matched with {action = "GetAllPayments", controller = "Payment", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAllPayments() on controller eCommerceApp.Host.Controllers.PaymentController (eCommerceApp.Host).
2025-01-17 03:15:21.657 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.PaymentController.GetAllPayments (eCommerceApp.Host) in 1.4183ms
2025-01-17 03:15:21.658 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.PaymentController.GetAllPayments (eCommerceApp.Host)'
2025-01-17 03:15:21.660 +02:00 [ERR]  Unknown Exception
System.InvalidOperationException: Unable to resolve service for type 'eCommerceApp.Application.Services.Interfaces.Cart.IPaymentMethodService' while attempting to activate 'eCommerceApp.Host.Controllers.PaymentController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at eCommerceApp.Infrastructure.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in D:\Ecommerce-API\eCommerceAppSolution\eCommerceApp.Infrastructure\Middleware\ExceptionHandlingMiddleware.cs:line 16
2025-01-17 03:15:21.673 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/api/Payment - 500 null application/json 44.3987ms
2025-01-17 03:15:30.602 +02:00 [INF] Application is shutting down...
2025-01-17 03:15:55.623 +02:00 [INF] Application Is Building.....
2025-01-17 03:15:55.773 +02:00 [INF] User profile is available. Using 'C:\Users\moham\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 03:15:55.842 +02:00 [INF] Application Is Running.....
2025-01-17 03:15:55.891 +02:00 [INF] Now listening on: http://localhost:5071
2025-01-17 03:15:55.893 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 03:15:55.894 +02:00 [INF] Hosting environment: Development
2025-01-17 03:15:55.894 +02:00 [INF] Content root path: D:\Ecommerce-API\eCommerceAppSolution\eCommerceApp.Host
2025-01-17 03:15:56.440 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/index.html - null null
2025-01-17 03:15:56.546 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/index.html - 200 null text/html;charset=utf-8 106.93ms
2025-01-17 03:15:56.614 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - null null
2025-01-17 03:15:56.697 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.5471ms
2025-01-17 03:15:59.789 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/api/Payment - null null
2025-01-17 03:15:59.798 +02:00 [WRN] Failed to determine the https port for redirect.
2025-01-17 03:15:59.801 +02:00 [INF] Executing endpoint 'eCommerceApp.Host.Controllers.PaymentController.GetAllPayments (eCommerceApp.Host)'
2025-01-17 03:15:59.814 +02:00 [INF] Route matched with {action = "GetAllPayments", controller = "Payment", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] GetAllPayments() on controller eCommerceApp.Host.Controllers.PaymentController (eCommerceApp.Host).
2025-01-17 03:15:59.980 +02:00 [INF] Executing action method eCommerceApp.Host.Controllers.PaymentController.GetAllPayments (eCommerceApp.Host) - Validation state: "Valid"
2025-01-17 03:16:00.466 +02:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-17 03:16:00.902 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name]
FROM [PaymentMethods] AS [p]
2025-01-17 03:16:00.944 +02:00 [INF] Executed action method eCommerceApp.Host.Controllers.PaymentController.GetAllPayments (eCommerceApp.Host), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 960.2555ms.
2025-01-17 03:16:00.952 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[eCommerceApp.Application.DTOs.Cart.GetPaymentMethod, eCommerceApp.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-01-17 03:16:00.971 +02:00 [INF] Executed action eCommerceApp.Host.Controllers.PaymentController.GetAllPayments (eCommerceApp.Host) in 1152.1963ms
2025-01-17 03:16:00.972 +02:00 [INF] Executed endpoint 'eCommerceApp.Host.Controllers.PaymentController.GetAllPayments (eCommerceApp.Host)'
2025-01-17 03:16:00.982 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/api/Payment - 200 null application/json; charset=utf-8 1192.5883ms
2025-01-17 04:10:07.760 +02:00 [INF] Application is shutting down...
2025-01-17 17:03:11.552 +02:00 [INF] Application Is Building.....
2025-01-17 17:03:12.626 +02:00 [INF] User profile is available. Using 'C:\Users\moham\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-01-17 17:03:12.923 +02:00 [INF] Application Is Running.....
2025-01-17 17:03:13.001 +02:00 [INF] Now listening on: http://localhost:5071
2025-01-17 17:03:13.003 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-01-17 17:03:13.003 +02:00 [INF] Hosting environment: Development
2025-01-17 17:03:13.004 +02:00 [INF] Content root path: D:\Ecommerce-API\eCommerceAppSolution\eCommerceApp.Host
2025-01-17 17:03:13.781 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/index.html - null null
2025-01-17 17:03:14.591 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/index.html - 200 null text/html;charset=utf-8 810.5165ms
2025-01-17 17:03:14.667 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - null null
2025-01-17 17:03:14.752 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5071/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 85.0773ms
2025-01-17 17:04:02.579 +02:00 [INF] Application is shutting down...
2025-01-17 23:07:22.038 +02:00 [INF] Application Is Building.....
2025-01-17 23:07:23.603 +02:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-17 23:07:23.695 +02:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-17 23:07:41.807 +02:00 [INF] Application Is Building.....
2025-01-17 23:07:42.232 +02:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-01-17 23:07:42.798 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-17 23:07:42.818 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-01-17 23:07:42.822 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-01-17 23:07:42.823 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-01-17 23:07:42.856 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-01-17 23:07:42.869 +02:00 [INF] Applying migration '20250117210725_AddingCheckoutArchives'.
2025-01-17 23:07:42.923 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DELETE FROM [PaymentMethods]
WHERE [Id] = 'be6ee13a-955b-4606-98a6-f14053ea6aa5';
SELECT @@ROWCOUNT;
2025-01-17 23:07:42.941 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CheckOutArchives] (
    [Id] uniqueidentifier NOT NULL,
    [ProductId] uniqueidentifier NOT NULL,
    [Quantity] int NOT NULL,
    [UserId] uniqueidentifier NOT NULL,
    [CreatedData] datetime2 NOT NULL,
    CONSTRAINT [PK_CheckOutArchives] PRIMARY KEY ([Id])
);
2025-01-17 23:07:42.971 +02:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name') AND [object_id] = OBJECT_ID(N'[PaymentMethods]'))
    SET IDENTITY_INSERT [PaymentMethods] ON;
INSERT INTO [PaymentMethods] ([Id], [Name])
VALUES ('e8cd4d3e-923c-4dc9-a4db-df72f958957e', N'CreditCard');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Name') AND [object_id] = OBJECT_ID(N'[PaymentMethods]'))
    SET IDENTITY_INSERT [PaymentMethods] OFF;
2025-01-17 23:07:42.974 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250117210725_AddingCheckoutArchives', N'8.0.0');
